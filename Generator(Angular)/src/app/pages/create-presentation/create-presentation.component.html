  <div><button class="btn btn-back" (click)="goBack()">‚Üê Retour</button></div>
<div class="brief-wrapper">
  <h2 class="brief-title">√âtape 1/3 : D√©crivez votre pr√©sentation</h2>

  <form (ngSubmit)="onSubmit()" class="form">
    <!-- Sujet -->
    <div class="form-group">
      <label for="subject">Sujet</label>
      <input
        [(ngModel)]="presentation.subject"
        name="subject"
        id="subject"
        placeholder="Quel est le sujet principal de votre pr√©sentation ?"
        class="input"
        required
      />
      <small class="input-hint">Exemple : L'intelligence artificielle dans l'√©ducation</small>
    </div>

    <!-- Dur√©e + Audience -->
    <div class="form-row">
      <div class="form-group">
        <label for="duration">Dur√©e</label>
        <select [(ngModel)]="presentation.duration" name="duration" id="duration" class="input" required>
          <option value="">Choisir la dur√©e</option>
          <option value="5">5 minutes</option>
          <option value="15">15 minutes</option>
          <option value="30">30 minutes</option>
        </select>
      </div>

      <div class="form-group">
        <label for="audience">Audience</label>
        <select [(ngModel)]="presentation.audience" name="audience" id="audience" class="input" required>
          <option value="">Choisir l'audience</option>
          <option>√âtudiants</option>
          <option>Professionnels</option>
          <option>Grand public</option>
        </select>
      </div>
    </div>

    <!-- Objectif -->
    <div class="form-group">
      <label for="objectif">Objectif</label>
      <textarea
        [(ngModel)]="presentation.goal"
        name="objectif"
        id="objectif"
        placeholder="Quel est l'objectif de cette pr√©sentation ?"
        class="input"
      ></textarea>
    </div>

    <!-- √âtape 2 : Choix du template -->
    <h3 class="brief-title">√âtape 2/3 : Choisissez un template</h3>

    <div class="form-group">
      <label for="template">Template</label>
      <select
        [(ngModel)]="presentation.templateId"
        name="templateId"
        id="template"
        class="input"
        required
        (change)="onTemplateChange()"
      >
        <option value="">Choisir un template</option>
        <option *ngFor="let tpl of availableTemplates" [value]="tpl.id">
          {{ tpl.name }}
        </option>
      </select>
    </div>

    <!-- Aper√ßu dynamique -->
    <div class="preview-box">
      <div
        *ngIf="parsedStructure?.sections?.length; else noPreview"
        [ngStyle]="parsedStyles"
        class="dynamic-preview"
      >
        <div *ngFor="let section of parsedStructure.sections">
          <ng-container [ngSwitch]="section.type">
            <h2 *ngSwitchCase="'title'">{{ section.content || 'Titre par d√©faut' }}</h2>
            <p *ngSwitchCase="'text'">{{ section.content || 'üö® Contenu manquant !' }}</p>
            <div *ngSwitchDefault>Type inconnu</div>
          </ng-container>
        </div>
      </div>

      <ng-template #noPreview>
        <div class="no-preview">Aper√ßu indisponible</div>
      </ng-template>
    </div>

    <!-- Bouton g√©n√©rer -->
    <button type="submit" class="btn-primary">G√©n√©rer la structure</button>
  </form>

  <!-- Aper√ßu des slides g√©n√©r√©es -->
  <div *ngIf="generatedStructure.length > 0" class="slide-container">
    <h3 class="slide-title">Structure g√©n√©r√©e :</h3>

    <div *ngFor="let slide of generatedStructure; let i = index" class="slide" [class.active]="i === currentSlide">
      {{ slide }}
    </div>

    <div class="controls">
      <button (click)="previousSlide()" [disabled]="currentSlide === 0" class="btn-primary">Pr√©c√©dent</button>
      <button (click)="nextSlide()" [disabled]="currentSlide === generatedStructure.length - 1" class="btn-primary">
        Suivant
      </button>
    </div>

    <p class="slide-counter">Slide {{ currentSlide + 1 }} / {{ generatedStructure.length }}</p>
  </div>
</div>
